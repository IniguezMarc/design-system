import { Meta } from "@storybook/blocks";

<Meta title="Component Guide" />

# Component Creation Guide

This guide explains how to create new components following the **Atomic Design** methodology used in this project, with a focus on **High Customizability** and **Standardized Structure**.

## 1. Choose the Level

- **Atom**: Basic HTML element (e.g., `Button`, `Input`, `Badge`).
- **Molecule**: Group of atoms (e.g., `UserCard`, `SearchForm`).
- **Organism**: Full section (e.g., `Navbar`, `Hero`).

## 2. File Structure

We follow a **"Basic + Variation"** architecture to ensure maximum flexibility while maintaining backward compatibility.

Navigate to `src/components/[level]/[ComponentName]/` and create:

1.  **`Basic[ComponentName].tsx`**: The CORE "super-component". Contains all logic, slots, and color overrides.
2.  **`[VariantName][ComponentName].tsx`** (Optional): A distinct variation that presets props on the Basic component (e.g., `ThreeDButton.tsx`).
3.  **`[ComponentName].tsx`**: The standard export. Usually references `Basic[ComponentName]` or the main variant.
4.  **`Basic[ComponentName].stories.tsx`**: Default story for the core component.
5.  **`[VariantName][ComponentName].stories.tsx`**: Default story for the variation.

## 3. Implementation Standards

Every component must support the following customization pillars:

### A. Custom Styles (Slots)

Instead of a single `className`, expose a `customStyles` prop typed with slots.

```tsx
export interface ComponentSlots {
    container?: string;
    label?: string;
    icon?: string;
}

interface Props {
    customStyles?: ComponentSlots;
    // ...
}
```

### B. Color Overrides

Do not hardcode colors in classes. Use props for every color aspect to allow full theming.

```tsx
interface Props {
    // ...
    primaryColor?: string;
    darkPrimaryColor?: string;
    hoverColor?: string;
}

// In component:
const bgColor = props.primaryColor || 'bg-blue-600';
```

### C. Dark Mode Support

Always include `dark:` utility classes for every color prop or default value.

### D. Standardized Storybook

-   **Wrapper**: Use the standard dark-mode wrapper in `render`.
-   **Controls**: Group props into categories (`PROPS`, `Colors`, `Styles`).
-   **Docs**: Hide interactive stories (`Default`) from the "Docs" tab using `tags: ['!autodocs']` to keep the component documentation clean.

## 4. Example: `Tag` Component

**File: `BasicTag.tsx`**

```tsx
import React from 'react';

export interface TagSlots {
    container?: string;
    text?: string;
    // ...
}

export interface TagProps {
    label: string;
    customStyles?: TagSlots;
    bgColor?: string;
    textColor?: string;
}

export const BasicTag = ({ 
    label, 
    customStyles = {},
    bgColor = "bg-blue-100", 
    textColor = "text-blue-800" 
}: TagProps) => {
    return (
        <span className={`${bgColor} ${textColor} ${customStyles.container || ''}`}>
            <span className={customStyles.text}>{label}</span>
        </span>
    );
};
```

**File: `Tag.tsx`**

```tsx
import { BasicTag, type TagProps } from './BasicTag';
export { BasicTag as Tag };
export type { TagProps };
```

**File: `BasicTag.stories.tsx`**

```tsx
import type { Meta, StoryObj } from '@storybook/react';
import { BasicTag } from './BasicTag';

const meta: Meta<typeof BasicTag> = {
    title: 'Atoms/Tag/BasicTag',
    component: BasicTag,
    tags: ['autodocs'],
    argTypes: {
        bgColor: { control: 'text', table: { category: 'Colors' } },
        customStyles: { control: 'object', table: { category: 'Styles' } }
    },
    // ... render wrapper ...
};
export default meta;

export const Default: StoryObj<typeof BasicTag> = {
    tags: ['!autodocs'],
    args: {
        label: 'React',
        bgColor: 'bg-blue-100',
        customStyles: { container: '', text: '' }
    }
};
```

## 5. AI Generation Prompt

Use the following detailed prompt to generate a new component that adheres to all project standards.

> **Prompt:**
>
> You are an expert React developer working on a Design System. I need a new component called `[ComponentName]` of type `[Atom/Molecule/Organism]`.
>
> **Context & Tech Stack:**
> -   **Framework**: React (TypeScript)
> -   **Styling**: Tailwind CSS (Utility-first)
> -   **Documentation**: Storybook 8
> -   **Methodology**: Atomic Design
>
> Please implement it following these strict rules:
>
> 1.  **File Structure**:
>     -   `Basic[ComponentName].tsx`: The core component.
>     -   `[ComponentName].tsx`: A simplified wrapper export (re-export `Basic[ComponentName]` as `[ComponentName]`).
>     -   `Basic[ComponentName].stories.tsx`: The Storybook file.
>
> 2.  **Architecture (The "Basic" Pattern)**:
>     -   Use strict TypeScript interfaces.
>     -   **Slots**: Expose a `customStyles` prop (interface `[ComponentName]Slots`) for granular internal element styling (e.g., `{ container, text, icon }`).
>     -   **Colors**: Do NOT hardcode colors (e.g., `bg-blue-500`). Instead, accept props like `primaryColor`, `borderColor` with default values (e.g., `primaryColor = "bg-blue-500"`).
>     -   **Dark Mode**: Ensure every color prop has a `dark:` counterpart in its default value.
>     -   **Images**: For images, use `loading="lazy"` and `decoding="async"` (optional via `loading` prop).
>
> 3.  **Storybook Standards**:
>     -   **Title**: `[Type]/[ComponentName]/Basic[ComponentName]`
>     -   **Tags**: Set `tags: []` to disable automatic docs generation.
>     -   **Stories**: Create a `Default` story for the main interactive example.
>     -   **Docs**: Add `tags: ['!autodocs']` to the `Default` story definition (redundant but good practice).
>     -   **Controls**: Use `argTypes` to categorize props (e.g., `table: { category: 'Colors' }`).
>     -   **Decorator**: Wrap the story in a `div` that toggles `dark` class based on an `isDark` arg.
>
> Please provide the code for all three files.
